<!DOCTYPE HTML>
<html>
<head>
<title>Remote Media Center</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="/js/jquery-3.3.1.js">

</script>
</head>
<body>
	<h1>Remote Media Center</h1>
	<ul>
		<li><a href="/index.html">File Explorer</a></li>
		<li><a href="/mouseKeyboard.html">Mouse/Keyboard</a></li>
	</ul>
	<h2>Mouse/Keyboard</h2>
	<span id="coordenates"></span>
	<img id="screen" src="/screen/shoot" width="100%" height="100%" alt="Unable to load screen"/>
	<script type = "text/javascript">
	
		$('#screen').mousemove(function(e) {
			var clientCoords = "( " + e.clientX + ", " + e.clientY + " )";
			$("#coordenates").text("( e.clientX, e.clientY ) - " + clientCoords);
			$.ajax({url: "/screen/mouse/move", type: "get", async: false, data: {"x": e.clientX, "y": e.clientY, "width": parseInt($("#screen").width(), 10), "height": parseInt($('#screen').height(), 10)}});
		});
		
		$('#screen').mousedown(function(event) {
			$.ajax({url: "/screen/mouse/click", type: "get", async: false, data: {"button": event.button, "event": 0}});
		});
		
		$('#screen').mouseup(function(event) {
			$.ajax({url: "/screen/mouse/click", type: "get", async: false, data: {"button": event.button, "event": 1}});
		});
		
		$('#textarea').keydown(function(event) {
			$.ajax({url: "/screen/keyboard", type: "get", async: false, data: {"key": event.keyCode, "event": 0}});
		});
		
		$('#textarea').keyup(function(event) {
			$.ajax({url: "/screen/keyboard", type: "get", async: false, data: {"key": event.keyCode, "event": 1}});
		});

		
		setInterval(function(){
		    $('#screen').attr("src", "/screen/shoot?"+new Date().getTime());
		}, 1000);
	</script>
</body>
</html>